{% for commit in commits %}
<div
    class="commit-item {% if commit.hash == current_commit_hash %}active{% endif %}"
    hx-get="/commit/{{ commit.hash }}/files"
    hx-target="#files-list"
    hx-indicator="#loading-files"
    onclick="document.getElementById('file-preview').innerHTML = ''; updateCommitUrl('{{ commit.hash }}');"
>
    <div class="commit-hash">{{ commit.short_hash }}</div>
    <div class="commit-message">
        {% if commit.message %}
            {{ commit.message }}
        {% else %}
            <span class="text-muted" style="font-style: italic;">(initial commit)</span>
        {% endif %}
    </div>
    <div class="commit-info">
        <span>{{ commit.file_count }} file{{ 's' if commit.file_count != 1 else '' }}</span>
    </div>
</div>
{% endfor %}

{% if has_more %}
<div
    id="load-more-trigger"
    hx-get="/commits?offset={{ offset }}&limit=10"
    hx-trigger="intersect once"
    hx-swap="outerHTML"
    style="padding: 1rem; text-align: center; color: hsl(var(--muted-foreground)); font-size: 0.75rem;"
>
    <div class="spinner" style="margin: 0 auto 0.5rem;"></div>
    <span>Loading more commits...</span>
</div>
{% endif %}

